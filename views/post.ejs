<%- include('partials/header') -%>

<body class="body-bg min-h-screen pt-12 md:pt-20 pb-6 px-2 md:px-0" style="font-family:'Lato',sans-serif;">

<main class="bg-white lg:max-w-4xl max-w-lg mx-auto p-8 md:p-12 my-10 rounded-lg shadow-2xl">
  <section>
    <h3 class="font-bold text-2xl"><%= post.title %></h3>
    <div class="flex flex-col ml-4">
      <a href="/profile" class="font-bold hover:underline"><p class="text-gray-600 pt-2">Go to profile</p></a>
      <a href="/feed" class="font-bold hover:underline"><p class="text-gray-600 pt-2">Go to feed</p></a>
    </div>
    <div class="container">
      <div class="row justify-content-center mt-5">
        <div>
          <img class="w-4/5 lg:w-3/5 py-2 overflow-y-hidden mx-auto" src="<%= post.image%>" />
          <h4 class="font-bold text-xl">Description:</h4>
          <p><%= post.description %></p>
          <div class="row justify-content-between">
            <h3 class="col-3">Likes: <%= post.likes %></h3>
            <form class="col-1" action="/post/likePost/<%= post.id %>?_method=PUT" method="POST" >
              <button class="fa fa-heart" type="submit"></button>
            </form>
            <%if(post.user == user.id){ %>
            <form action="/post/deletePost/<%= post.id %>?_method=DELETE" method="POST" class="col-3" >
              <button class="fa fa-trash" type="submit"></button>
            </form>
            <%}%>
          </div>
        </div>
    
        <!-- Comments -->
        <div class="col-md-6 my-4">
          <h5>Comments:</h5>
          <div class="card-group flex-column">
            <% comments.forEach(comment=> { %>
              <div class="card my-2 p-3">
                <h6 class="card-subtitle text-muted">
                  <%= comment.userName %> says:
                </h6>
                <p class="card-text mx-3">
                  <%= comment.comment %>
                </p>
                <%if(comment.user == user.id){ %>
                <form action="/comment/deleteComment/<%= comment._id %>?_method=DELETE" method="POST" >
                    <button class="fa fa-trash" type="submit"></button>
                </form>
                <%}%>
              </div>
              <% }) %>
                <div class="card my-2 p-3">
                  <h5 class="card-title">Add a Comment:</h5>
                  <form class="flex flex-col" action="/comment/createComment/<%= post.id %>" method="POST">
                    <div class="mb-6 pt-3 rounded bg-gray-200">
                        <label for="comment" class="block text-gray-700 text-sm font-bold mb-2 ml-3">Comment:</label>
                        <input type="text" id="comment" name="comment" required class="bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-purple-600 transition duration-500 px-3 pb-3" id="title" name="title">
                    </div>
                    <button type="submit" class="bg-red-600 hover:bg-yellow-700 text-white font-bold py-2 rounded shadow-lg hover:shadow-xl transition duration-200" value="Upload">Submit</button>
                  </form>
                </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<%- include('partials/footer') -%>
